{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introduction Bonjour et bienvenue sur mon site, si vous \u00eates tomb\u00e9 sur ce site c'est juste un petit site sur lequel je garde quelques snippets de code et scripts donc n'h\u00e9sitez pas \u00e0 vous en servir, il y aura un peu de tout et sera souvent mis \u00e0 jour pour ajouter de nouveaux articles.","title":"Introduction"},{"location":"#introduction","text":"Bonjour et bienvenue sur mon site, si vous \u00eates tomb\u00e9 sur ce site c'est juste un petit site sur lequel je garde quelques snippets de code et scripts donc n'h\u00e9sitez pas \u00e0 vous en servir, il y aura un peu de tout et sera souvent mis \u00e0 jour pour ajouter de nouveaux articles.","title":"Introduction"},{"location":"sysadmin-linux/reverse-nginx/","text":"Comment faire un reverse proxy Nginx Etape 1 : installer Nginx Debian, Ubuntu sudo apt update sudo apt install nginx sudo systemctl enable --now nginx CentOS, Almalinux, Rocky...etc sudo dnf install nginx sudo systemctl enable --now nginx Etape 2 : G\u00e9n\u00e9rer un certificat SSL si n\u00e9cessaire Installation de certbot Debian, Ubuntu sudo apt update && sudo apt install python3-certbot-nginx CentOS, Almalinux, Rocky...etc sudo dnf install certbot python3-certbot-nginx G\u00e9n\u00e9ration du certificat certbot certonly -d <nom_domaine> Facultatif : Si vous voulez activer le renouvellement automatique du certifcat SSL, ajoutez simplement la ligne suivante \u00e0 cron (commande : export VISUAL=nano;crontab -e ) @daily certbot renew --quiet --nginx Ajout du fichier de configuration du reverse proxy Sous Debian/Ubuntu, le fichier sera \u00e0 mettre dans le dossier /etc/nginx/sites-enabled/ alors que sous CentOS et d\u00e9riv\u00e9es, il sera \u00e0 mettre dans le dossier /etc/nginx/conf.d/ . Nommez le comme vous voulez, je vous recommande : <nom_domaine>.conf N'oubliez pas de remplacer les valeurs entre <> Configuration sans SSL server { listen 80; listen [::]:80; server_name <nom_domaine>; access_log /var/log/nginx/reverse-access.log; error_log /var/log/nginx/reverse-error.log; location / { proxy_pass http://localhost:<port>; } } Configuration avec SSL server { listen 80; listen [::]:80; server_name <nom_domaine>; return 302 https://$server_name$request_uri; } server { listen 443 ssl http2; listen [::]:443 ssl http2; ssl on; ssl_certificate /etc/letsencrypt/live/<nom_domaine>/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/<nom_domaine>/privkey.pem; server_name <nom_domaine>; access_log /var/log/nginx/reverse-access.log; error_log /var/log/nginx/reverse-error.log; location / { proxy_pass http://localhost:<port>; } } Red\u00e9marrage de Nginx Et voil\u00e0, vous venez de mettre en place votre reverse proxy, pour l'activer, v\u00e9rifiez votre fichier de configuration via le commande nginx -t puis red\u00e9marrez le service via la commande sudo systemctl restart nginx","title":"Comment faire un reverse proxy Nginx"},{"location":"sysadmin-linux/reverse-nginx/#comment-faire-un-reverse-proxy-nginx","text":"","title":"Comment faire un reverse proxy Nginx"},{"location":"sysadmin-linux/reverse-nginx/#etape-1-installer-nginx","text":"","title":"Etape 1 : installer Nginx"},{"location":"sysadmin-linux/reverse-nginx/#debian-ubuntu","text":"sudo apt update sudo apt install nginx sudo systemctl enable --now nginx","title":"Debian, Ubuntu"},{"location":"sysadmin-linux/reverse-nginx/#centos-almalinux-rockyetc","text":"sudo dnf install nginx sudo systemctl enable --now nginx","title":"CentOS, Almalinux, Rocky...etc"},{"location":"sysadmin-linux/reverse-nginx/#etape-2-generer-un-certificat-ssl-si-necessaire","text":"","title":"Etape 2 : G\u00e9n\u00e9rer un certificat SSL si n\u00e9cessaire"},{"location":"sysadmin-linux/reverse-nginx/#installation-de-certbot","text":"","title":"Installation de certbot"},{"location":"sysadmin-linux/reverse-nginx/#debian-ubuntu_1","text":"sudo apt update && sudo apt install python3-certbot-nginx","title":"Debian, Ubuntu"},{"location":"sysadmin-linux/reverse-nginx/#centos-almalinux-rockyetc_1","text":"sudo dnf install certbot python3-certbot-nginx","title":"CentOS, Almalinux, Rocky...etc"},{"location":"sysadmin-linux/reverse-nginx/#generation-du-certificat","text":"certbot certonly -d <nom_domaine> Facultatif : Si vous voulez activer le renouvellement automatique du certifcat SSL, ajoutez simplement la ligne suivante \u00e0 cron (commande : export VISUAL=nano;crontab -e ) @daily certbot renew --quiet --nginx","title":"G\u00e9n\u00e9ration du certificat"},{"location":"sysadmin-linux/reverse-nginx/#ajout-du-fichier-de-configuration-du-reverse-proxy","text":"Sous Debian/Ubuntu, le fichier sera \u00e0 mettre dans le dossier /etc/nginx/sites-enabled/ alors que sous CentOS et d\u00e9riv\u00e9es, il sera \u00e0 mettre dans le dossier /etc/nginx/conf.d/ . Nommez le comme vous voulez, je vous recommande : <nom_domaine>.conf N'oubliez pas de remplacer les valeurs entre <>","title":"Ajout du fichier de configuration du reverse proxy"},{"location":"sysadmin-linux/reverse-nginx/#configuration-sans-ssl","text":"server { listen 80; listen [::]:80; server_name <nom_domaine>; access_log /var/log/nginx/reverse-access.log; error_log /var/log/nginx/reverse-error.log; location / { proxy_pass http://localhost:<port>; } }","title":"Configuration sans SSL"},{"location":"sysadmin-linux/reverse-nginx/#configuration-avec-ssl","text":"server { listen 80; listen [::]:80; server_name <nom_domaine>; return 302 https://$server_name$request_uri; } server { listen 443 ssl http2; listen [::]:443 ssl http2; ssl on; ssl_certificate /etc/letsencrypt/live/<nom_domaine>/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/<nom_domaine>/privkey.pem; server_name <nom_domaine>; access_log /var/log/nginx/reverse-access.log; error_log /var/log/nginx/reverse-error.log; location / { proxy_pass http://localhost:<port>; } }","title":"Configuration avec SSL"},{"location":"sysadmin-linux/reverse-nginx/#redemarrage-de-nginx","text":"Et voil\u00e0, vous venez de mettre en place votre reverse proxy, pour l'activer, v\u00e9rifiez votre fichier de configuration via le commande nginx -t puis red\u00e9marrez le service via la commande sudo systemctl restart nginx","title":"Red\u00e9marrage de Nginx"}]}