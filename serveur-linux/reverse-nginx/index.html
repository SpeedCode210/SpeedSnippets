<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Comment faire un reverse proxy Nginx - SpeedCode Snippets</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Comment faire un reverse proxy Nginx";
        var mkdocs_page_input_path = "serveur-linux/reverse-nginx.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/cs.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/js.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/cpp.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/json.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> SpeedCode Snippets
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Introduction</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">C#</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../c%23/embedded-resource-read/">Lecture d'une EmbeddedResource</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../c%23/ptero-egg-dotnet-6/">Egg Pterodactyl dotnet 6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../c%23/sha256/">Génération de SHA-256</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Linux</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/commandes-apt/">Commandes de base APT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/commandes-dnf/">Commandes de base DNF</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/commandes-pacman/">Commandes de base Pacman</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/creer-deb/">Comment créer un paquet DEB</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/creer-rpm/">Comment créer un paquet RPM</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/installation-canon-lbp3010/">Installation de l'imprimante Canon LBP3010 sous Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/postinstall-fedora/">Post-installation de Fedora Workstation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Serveur linux</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Comment faire un reverse proxy Nginx</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#etape-1-installer-nginx">Etape 1 : installer Nginx</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#debian-ubuntu">Debian, Ubuntu</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#centos-almalinux-rockyetc">CentOS, Almalinux, Rocky...etc</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#etape-2-generer-un-certificat-ssl-si-necessaire">Etape 2 : Générer un certificat SSL si nécessaire</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#installation-de-certbot">Installation de certbot</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#debian-ubuntu_1">Debian, Ubuntu</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#centos-almalinux-rockyetc_1">CentOS, Almalinux, Rocky...etc</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#generation-du-certificat">Génération du certificat</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ajout-du-fichier-de-configuration-du-reverse-proxy">Ajout du fichier de configuration du reverse proxy</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#configuration-sans-ssl">Configuration sans SSL</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configuration-avec-ssl">Configuration avec SSL</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#redemarrage-de-nginx">Redémarrage de Nginx</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../xfce-serveur-almalinux/">Installer XFCE sur un serveur Almalinux</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">SpeedCode Snippets</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Serveur linux &raquo;</li>
      <li>Comment faire un reverse proxy Nginx</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="comment-faire-un-reverse-proxy-nginx">Comment faire un reverse proxy Nginx</h1>
<p>Un serveur proxy est un serveur intermédiaire ou intermédiaire qui transfère les demandes de contenu de plusieurs clients vers différents serveurs sur Internet. Un serveur proxy inverse (reverse proxy) est un type de serveur proxy qui se trouve généralement derrière le pare-feu dans un réseau privé et dirige les demandes des clients vers le serveur principal approprié. Un proxy inverse fournit un niveau supplémentaire d'abstraction et de contrôle pour assurer la fluidité du trafic réseau entre les clients et les serveurs.</p>
<p>Dans ce tutoriel, nous allons voir comment mettre en place un reverse proxy sous Linux avec Nginx.</p>
<h2 id="etape-1-installer-nginx">Etape 1 : installer Nginx</h2>
<h3 id="debian-ubuntu">Debian, Ubuntu</h3>
<pre><code>sudo apt update
sudo apt install nginx
sudo systemctl enable --now nginx
</code></pre>
<h3 id="centos-almalinux-rockyetc">CentOS, Almalinux, Rocky...etc</h3>
<pre><code>sudo dnf install nginx
sudo systemctl enable --now nginx
</code></pre>
<h2 id="etape-2-generer-un-certificat-ssl-si-necessaire">Etape 2 : Générer un certificat SSL si nécessaire</h2>
<h3 id="installation-de-certbot">Installation de certbot</h3>
<h4 id="debian-ubuntu_1">Debian, Ubuntu</h4>
<pre><code>sudo apt update &amp;&amp; sudo apt install python3-certbot-nginx
</code></pre>
<h4 id="centos-almalinux-rockyetc_1">CentOS, Almalinux, Rocky...etc</h4>
<pre><code>sudo dnf install certbot python3-certbot-nginx
</code></pre>
<h3 id="generation-du-certificat">Génération du certificat</h3>
<pre><code>certbot certonly -d &lt;nom_domaine&gt;
</code></pre>
<p><strong>Facultatif :</strong> Si vous voulez activer le renouvellement automatique du certifcat SSL, ajoutez simplement la ligne suivante à cron (commande : <code>export VISUAL=nano;crontab -e</code>)</p>
<pre><code>@daily certbot renew --quiet --nginx
</code></pre>
<h2 id="ajout-du-fichier-de-configuration-du-reverse-proxy">Ajout du fichier de configuration du reverse proxy</h2>
<p>Sous Debian/Ubuntu, le fichier sera à mettre dans le dossier <code>/etc/nginx/sites-enabled/</code> alors que sous CentOS et dérivées, il sera à mettre dans le dossier <code>/etc/nginx/conf.d/</code>.</p>
<p>Nommez le comme vous voulez, je vous recommande : <code>&lt;nom_domaine&gt;.conf</code></p>
<p>N'oubliez pas de remplacer les valeurs entre &lt;&gt;</p>
<h3 id="configuration-sans-ssl">Configuration sans SSL</h3>
<pre><code>server {
        listen 80;
        listen [::]:80;
        server_name  &lt;nom_domaine&gt;;
        access_log /var/log/nginx/reverse-access.log;
        error_log /var/log/nginx/reverse-error.log;
        location / {
            proxy_pass http://localhost:&lt;port&gt;;    
        }
}
</code></pre>
<h3 id="configuration-avec-ssl">Configuration avec SSL</h3>
<pre><code>server {
        listen 80;
        listen [::]:80;
        server_name  &lt;nom_domaine&gt;;
        return 302 https://$server_name$request_uri;
}

server {

        listen 443 ssl http2;
        listen [::]:443 ssl http2;
        ssl_certificate         /etc/letsencrypt/live/&lt;nom_domaine&gt;/fullchain.pem;
        ssl_certificate_key     /etc/letsencrypt/live/&lt;nom_domaine&gt;/privkey.pem;
        server_name  &lt;nom_domaine&gt;;
        access_log /var/log/nginx/reverse-access.log;
        error_log /var/log/nginx/reverse-error.log;
        location / {
            proxy_pass http://localhost:&lt;port&gt;;    
        }
}
</code></pre>
<h2 id="redemarrage-de-nginx">Redémarrage de Nginx</h2>
<p>Et voilà, vous venez de mettre en place votre reverse proxy, pour l'activer, vérifiez votre fichier de configuration via le commande <code>nginx -t</code> puis redémarrez le service via la commande <code>sudo systemctl restart nginx</code></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../linux/postinstall-fedora/" class="btn btn-neutral float-left" title="Post-installation de Fedora Workstation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../xfce-serveur-almalinux/" class="btn btn-neutral float-right" title="Installer XFCE sur un serveur Almalinux">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../linux/postinstall-fedora/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../xfce-serveur-almalinux/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
